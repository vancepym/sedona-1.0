<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<!--

  Copyright (c) 2009 Tridium, Inc
  Licensed under the Academic Free License version 3.0

  History:
    12 Jan 09  Brian Frank  Creation

-->

<!-- TOC-HEADER-START -->
<!-- Auto-generated by sedonac -->
<head>
  <title>Platforms</title>
  <meta http-equiv='Content-type' content='text/html;charset=UTF-8' />
  <link rel='stylesheet' type='text/css' href='style.css'/>
</head>
<body>
<p>
  <a href='index.html'>
    <img src='logo.png' alt='Sedona'/>
  </a>
</p>
<div class='nav'>
  <a href='index.html'>Index</a>
 | <a href='schema.html'>Prev</a>
 | <a href='networking.html'>Next</a>
</div>
<h1 class='title'>Platforms</h1>
<div class='content'>
<!-- TOC-HEADER-END -->

<!--/////////////////////////////////////////////////////////-->
<h1 id="overview">Overview</h1>
<!--/////////////////////////////////////////////////////////-->

<p>
One of Sedona's strengths is the portability of Sedona kits and apps across different
hardware platforms.  
This is accomplished by building a custom version of the Sedona VM for each supported platform,
tailored to the specific underlying architecture.
The process for customizing the SVM is streamlined by encapsulating the
platform-specific information into a platform manifest file.
<code>sedonac</code> uses the platform manifest file as described in 
<a href='porting.html#staging'>Staging</a> to organize the Sedona native files before 
compilation by the native toolchain.
</p>                   

<!--/////////////////////////////////////////////////////////-->
<h1 id="manifest">Platform Manifest</h1>
<!--/////////////////////////////////////////////////////////-->

<p>
In Sedona, the platform manifest is an XML file that defines specific properties needed for 
building the Sedona VM, such as endianness and pointer size.
In addition, it provides source code paths for the
Sedona <a href='nativeMethods.html'>native methods</a> required by the 
kits that will be supported by the Sedona VM.
(Kits without native methods do not need to be mentioned in the platform XML, 
as they are fully defined within the scode image.)
</p>

<p>
For example, consider the generic Windows platform XML file:
</p>

<pre>
&lt;sedonaPlatform id="generic-win32">

  &lt;compile 
    endian="little" 
    blockSize="4" 
    refSize="4"
    debug="false"
    test="false"
  >
  
    &lt;!-- Native Kits -->
    &lt;nativeKit depend="sys  1.0" />
    &lt;nativeKit depend="inet 1.0" />

    &lt;!-- Native Sources -->
    &lt;nativeSource path="/src/vm" />
    &lt;nativeSource path="/src/sys/native" />
    &lt;nativeSource path="/src/sys/native/std" />
    &lt;nativeSource path="/src/sys/native/win32" />
    &lt;nativeSource path="/src/inet/native" />
    &lt;nativeSource path="/src/inet/native/std" />
    &lt;nativeSource path="/src/inet/native/sha1" />
      
  &lt;/compile>
       
&lt;/sedonaPlatform>
</pre>


<p><b>&lt;sedonaPlatform></b> top level element for staging platform:</p>
<ul>
  <li><b>id</b>: a string that identifies the platform uniquely. 
  This string must match the one returned by the platform's implementation of
  <code>PlatformService.platformId()</code>.
  </li>
</ul>

<p><b>&lt;compile></b> provides platform-specific parameters:</p>
<ul>
<li><b>endian</b>: either "little" or "big" based on target processor.</li>
<li><b>blockSize</b>: size of a scode block in bytes 
(see "<a href="../src/vm/sedona.h">sedona.h</a>")</li>
<li><b>refSize</b>: size of a memory pointer in bytes for target processor 
(4 for 32-bit processor).</li>
<li><b>debug</b>: (optional) boolean to include debug meta-data in image.  Defaults to false</li>
<li><b>test</b>: (optional) boolean to include test code in image.  Defaults to false</li>
<li><b>armDouble</b>: set to true if using an ARM microprocessor where 64-bit
doubles are stored using byte level little endian, word level big endian.</li>
</ul>

<p><b>&lt;nativeKit></b> designates a kit with native methods that the platform will support:</p>
<ul>
<li><b>depend</b>: (required) <a href='kits.html#depends'>dependency</a> as a kit 
name and version constraint.</li>
</ul>

<p><b>&lt;nativeSource></b> designates a source path to native code:</p>
<ul>
  <li><b>path</b>: (required) path to a folder with native code that must be 
  built into the Sedona VM image</li>
</ul>

<p>
Note that a kit with native methods can only run on a Sedona VM that includes the 
native code for those methods.
At the present time, the only way to find out whether a given Sedona VM has 
the native methods for a particular kit is to examine the platform manifest file.  
</p>


<!-- TOC-FOOTER-START -->
<!-- Auto-generated by sedonac -->
</div>
<div class='nav'>
  <a href='index.html'>Index</a>
 | <a href='schema.html'>Prev</a>
 | <a href='networking.html'>Next</a>
</div>
<div class='copyright'>Copyright &#169; 2007-2009 Tridium, Inc.</div>
</body>
<!-- TOC-FOOTER-END -->

</html>







